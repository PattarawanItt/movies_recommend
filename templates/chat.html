<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Movie Recommender Chatbot</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; }
    input, button { padding: 0.5rem; width: 100%; margin-top: 1rem; }
    #chatContainer { margin-top: 2rem; }
  </style>
</head>
<body>
  <h2 class="title">üé¨ Movie Recommender Chatbot</h2>
  
  <input id="userInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á ‡πÄ‡∏ä‡πà‡∏ô The Avengers" />
  <button onclick="sendMessage()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  
  <div id="chatContainer">
    <div class="reply" id="replyBox"></div>
    <div class="recommend" id="recommendBox"></div>
  </div>

  <script>
    async function sendMessage() {
      const input = document.getElementById("userInput").value;
      const replyBox = document.getElementById("replyBox");
      const recommendBox = document.getElementById("recommendBox");

      replyBox.innerHTML = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ñ‡∏≤‡∏° AI...";
      recommendBox.innerHTML = "";

      try {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: input, language: "th" }),
        });
        const data = await res.json();

        if (data.recommendations && data.recommendations.length > 0) {
          const listItems = data.recommendations
            .map(m => `<li>${m}</li>`)
            .join("");
          recommendBox.innerHTML = `<strong>üé• ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong><ul>${listItems}</ul>`;
        }
      } catch (err) {
        replyBox.innerHTML = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠";
        console.error(err);
      }
    }
  </script>
</body>
</html>